// Trafficlites - MVP React Native App with Map and Markers // Using Expo (easiest to start with React Native)

import React, { useState, useEffect } from 'react'; import { View, StyleSheet, Text } from 'react-native'; import MapView, { Marker } from 'react-native-maps'; import * as Location from 'expo-location';

export default function App() { const [location, setLocation] = useState(null); const [errorMsg, setErrorMsg] = useState(null);

// Example traffic lights with dummy coordinates and status const trafficLights = [ { id: 1, title: 'Main & 1st Ave', coords: { latitude: -26.6505, longitude: 153.0908 }, status: 'green', }, { id: 2, title: 'Beach Rd & 2nd St', coords: { latitude: -26.6525, longitude: 153.0915 }, status: 'red', }, ];

useEffect(() => { (async () => { let { status } = await Location.requestForegroundPermissionsAsync(); if (status !== 'granted') { setErrorMsg('Permission to access location was denied'); return; }

let location = await Location.getCurrentPositionAsync({});
  setLocation(location.coords);
})();

}, []);

return ( <View style={styles.container}> {location ? ( <MapView style={styles.map} initialRegion={{ latitude: location.latitude, longitude: location.longitude, latitudeDelta: 0.01, longitudeDelta: 0.01, }} showsUserLocation={true} > {trafficLights.map((light) => ( <Marker key={light.id} coordinate={light.coords} title={light.title} description={Light is ${light.status}} pinColor={ light.status === 'green' ? 'green' : light.status === 'yellow' ? 'gold' : 'red' } /> ))} </MapView> ) : ( <Text>{errorMsg || 'Getting location...'}</Text> )} </View> ); }

const styles = StyleSheet.create({ container: { flex: 1, }, map: { flex: 1, }, });
